/*!
 * calendar.js: inspired by the calendar module from Python
 * Copyright(c) 2011 Luciano Ramalho <luciano@ramalho.org>
 * MIT Licensed
 */
(function() {
  var CalendarException = function (t) {
    this.message = t, this.toString = function () {
      return this.constructor.name + ": " + this.message
    }
  }, Calendar = function (t) {
    this.firstWeekDay = t || 0
  };
  Calendar.prototype = {
    constructor: Calendar, weekStartDate: function (t) {
      for (var e = new Date(t.getTime()); e.getDay() !== this.firstWeekDay;)e.setDate(e.getDate() - 1);
      return e
    }, monthDates: function (t, e, n, r) {
      if ("number" != typeof t || 1970 > t)throw new CalendarException("year must be a number >= 1970");
      if ("number" != typeof e || 0 > e || e > 11)throw new CalendarException("month must be a number (Jan is 0)");
      var a = [], o = [], i = 0, s = this.weekStartDate(new Date(t, e, 1));
      do {
        for (i = 0; 7 > i; i++)o.push(n ? n(s) : s), s = new Date(s.getTime()), s.setDate(s.getDate() + 1);
        a.push(r ? r(o) : o), o = []
      } while (s.getMonth() <= e && s.getFullYear() === t);
      return a
    }, monthDays: function (t, e) {
      var n = function (t) {
        return t.getMonth() === e ? t.getDate() : 0
      };
      return this.monthDates(t, e, n)
    }, monthText: function (t, e) {
      if (void 0 === t) {
        var n = new Date;
        t = n.getFullYear(), e = n.getMonth()
      }
      var r = function (t) {
        for (var n = t.getMonth() === e ? "" + t.getDate() : "  "; n.length < 2;)n = " " + n;
        return n
      }, a = this.monthDates(t, e, r, function (t) {
        return t.join(" ")
      });
      return a.join("\n")
    }
  };
  for (var months = "JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC".split(" "), i = 0; i < months.length; i++) Calendar[months[i]] = i;
  Calendar.consts = {
    monthNames: [
      'January',
      'February',
      'March',
      'April',
      'May',
      'June',
      'July',
      'August',
      'September',
      'October',
      'November',
      'December'
    ],
    dayNames: [
      'Sunday',
      'Monday',
      'Tuesday',
      'Wednesday',
      'Thursday',
      'Friday',
      'Saturday'
    ],
    dayAbbr: [
      'Sun',
      'Mon',
      'Tue',
      'Wed',
      'Thu',
      'Fri',
      'Sat'
    ]
  };
  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined')
    module.exports = Calendar;
  else
    window.Calendar = Calendar;
})();
